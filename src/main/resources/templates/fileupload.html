<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="https://code.jquery.com/jquery-3.7.1.js"></script>
</head>
<body>
<div>
fileupload
    <input type="file" id="input_upload_img" onchange="readURLFile(this)" accept="image/*"/>
    <button onclick="list_user()">아작스 호출</button>

    <script>
        function readURLFile(input) {
        if (input.files && input.files[0]) {
            let reader = new FileReader();
            reader.readAsDataURL(input.files[0]);
            reader.onload = function(e) {
                let obj_file = input.files[0];

                //파일을 서버에 전송해봅니다!!
                let fileData = new FormData();
                fileData.append("file", obj_file);

                $.ajax({
                    url: "/api/default/uploadFile",
                    type: "POST",
                    data: fileData ,
                    cache : false,
                    contentType : false,
                    processData : false,
                    success: (data, status, xhr)=>{
                        alert(xhr.status);
                        alert(JSON.stringify(data));
                    },
                    error: (data)=>{
                        alert("error")
                    },
                });
            }
        }
    }
    </script>
</div>
</body>
</html>